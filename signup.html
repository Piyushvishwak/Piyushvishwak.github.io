<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sign Up</title>
  <link rel="stylesheet" href="/style.css">
</head>

<body>
  <div class="form-container">
    <h2>Sign Up</h2>
    <form action="/signup" method="post">
      <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" placeholder="Enter name" required autocomplete="off" onchange="checkName()">
        <p class="error-message" id="name-error"></p>
      </div>
      <div class="form-group">
        <label for="email">Email:</label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="Enter Email"
          required
          autocomplete="off"
          onchange="checkEmail()"
          class="input-field"
        />
        <p class="error-message" id="email-error"></p>
      </div>
      <div class="form-group">
        <label for="n">Password:</label>
        <input type="password" id="password" name="password" placeholder="password" required onchange="checkPass()">
        <p class="error-message" id="password-error"></p>
      </div>
      <button type="submit" class="submit-btn">Sign Up</button>
    </form>
  </div>

  <script>
    function checkName() {
      const nameInput = document.getElementById("name").value;
      const nameError = document.getElementById("name-error");

      nameError.innerHTML = "";

      if (nameInput.trim() === "") {
        nameError.innerHTML = "* Please enter your name.";
      }
      if (!isNaN(nameInput)) {
        nameError.innerHTML = "* Must have alphabets, not numbers.";
      }
    }
    function checkEmail(){
                var em = document.getElementById('email').value;
                if(!em){
                    document.getElementById('email-error').innerHTML="*fill an email id."
                }

                const atIndex = em.indexOf('@');

                if (atIndex === -1) {
                    document.getElementById('email-error').innerHTML="*must contain @ symbol."
                }

                const username = em.slice(0, atIndex);
                const domain = em.slice(atIndex + 1);

                if (!username || !domain) {
                    document.getElementById('email-error').innerHTML="*must contain a username and a domain."
                }

                const dotIndex = domain.indexOf('.');

                if (dotIndex === -1){
                    document.getElementById('email-error').innerHTML="*must contain a dot(.)."
                }

                if (dotIndex === 0 || dotIndex === domain.length - 1) {
                    document.getElementById('email-error').innerHTML="*dot cannot be at the beginning or ending."
                }
            }

    function checkPass() {
      const passwordInput = document.getElementById("password").value;
      const passwordError = document.getElementById("password-error");

      passwordError.innerHTML = "";

      if (passwordInput.trim() === "") {
        passwordError.innerHTML = "* Please enter your password.";
      }
      if (passwordInput.length < 8) {
        passwordError.innerHTML = "* Password must have 8 characters.";
      }
      if (passwordInput.search(/[a-z]/) < 0) {
        passwordError.innerHTML =
          "* Password must contain at least one lowercase letter.";
      }
      if (passwordInput.search(/[A-Z]/) < 0) {
        passwordError.innerHTML =
          "* Password must contain at least one uppercase letter.";
      }
      if (passwordInput.search(/[0-9]/) < 0) {
        passwordError.innerHTML =
          "* Password must contain at least one number.";
      }
    }
  </script>
</body>
</html>
